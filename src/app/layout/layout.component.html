<mat-sidenav-container class="layout-container">
  <!-- Sidebar -->
  <mat-sidenav mode="side" opened class="sidebar">
    <div class="sidebar-header">
      <img src="https://cpu.unsm.edu.pe/imagenes/logo.png" alt="Logo" class="logo-img">
      <div class="text-center text-light mt-2">{{ obtenerRole() }}</div>
    </div>

    <mat-nav-list>
      <a mat-list-item routerLink="/dashboard" routerLinkActive="active">
        <mat-icon>home</mat-icon>
        <span>Inicio</span>
      </a>

      <a mat-list-item *ngIf="hasPermission(['ROLE_RECEPCIONISTA', 'ADMINISTRADOR','ROLE_ADMINISTRADOR_EMPRESA'])" routerLink="/recepciones" routerLinkActive="active">
        <mat-icon>book</mat-icon>
        <span>Recepción</span>
      </a>

      <a mat-list-item *ngIf="hasPermission(['ACCEDER'])" routerLink="/usuarios" routerLinkActive="active">
        <mat-icon>person</mat-icon>
        <span>Usuarios</span>
      </a>

      <a mat-list-item *ngIf="hasPermission(['ROLE_ADMINISTRADOR','ROLE_ADMINISTRADOR_EMPRESA'])" routerLink="/clientes" routerLinkActive="active">
        <mat-icon>group</mat-icon>
        <span>Clientes</span>
      </a>

      <!-- Menú desplegable con mat-menu -->
      <mat-menu #reportesMenu="matMenu">
        <button mat-menu-item routerLink="/salidas-habitacion">
          <mat-icon>attach_money</mat-icon> Salidas
        </button>
        <button mat-menu-item routerLink="/lista-reservas">
          <mat-icon>library_books</mat-icon> Reservas
        </button>
      </mat-menu>
      <button mat-list-item [matMenuTriggerFor]="reportesMenu" *ngIf="hasPermission(['ROLE_ADMINISTRADOR','ROLE_ADMINISTRADOR_EMPRESA'])">
        <mat-icon>description</mat-icon>
        <span>Reportes</span>
      </button>
    </mat-nav-list>
  </mat-sidenav>

  <!-- Página principal -->
  <mat-sidenav-content>
    <mat-toolbar color="primary" class="mat-elevation-z4 justify-between">
      <button mat-icon-button (click)="toggleMenu()">
        <mat-icon>menu</mat-icon>
      </button>
      <span>{{ title }}</span>
      <button mat-raised-button [color]="isAuthenticated ? 'warn' : 'accent'" (click)="isAuthenticated ? logout() : login()">
        <mat-icon>power_settings_new</mat-icon>
        {{ isAuthenticated ? obtenerName() : 'Iniciar sesión' }}
      </button>
    </mat-toolbar>
      <div>
      <router-outlet></router-outlet>
    </div>

  </mat-sidenav-content>

</mat-sidenav-container>
